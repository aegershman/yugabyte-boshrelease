---
name: yb-master

description: |
  total instances of master nodes should be odd, because replication factor should be odd
  https://docs.yugabyte.com/latest/reference/configuration/yb-master/
  https://docs.yugabyte.com/latest/deploy/checklist/

templates:
  bin/pre-start.sh: bin/pre-start
  config/bpm.erb.yml: config/bpm.yml
  config/master.conf.erb: config/master.conf

packages:
  - yugabyte

consumes:
  - name: yb-master
    type: conn

provides:
  - name: yb-master
    type: conn

properties:
  replication_factor:
    description: |
      override of the replication_factor passed to the master servers;
      by default it's the number of yb-master instances

  gflags:
    description: extra "--key=value" properties to pass to the conf file
    example: |
      gflags:
        default_memory_limit_to_ram_ratio: 0.85
        max_log_size: 256
        minloglevel: 0
        placement_cloud: aws
        placement_region: us-west-2
        stderrthreshold: 2
        stop_logging_if_full_disk: true
