---
name: yb-tserver

description: |
  https://docs.yugabyte.com/latest/reference/configuration/yb-tserver/

templates:
  bin/post-start.sh: bin/post-start
  bin/pre-start.sh: bin/pre-start
  config/bpm.erb.yml: config/bpm.yml
  config/roles.cql.erb: config/roles.cql
  config/tserver.conf.erb: config/tserver.conf

packages:
  - python-2.7
  - yugabyte

consumes:
  - name: yb-master
    type: conn

provides:
  - name: yb-tserver
    type: conn

properties:
  rpc_bind_addresses_port:
    default: 9100
  server_broadcast_addresses_port:
    default: 9100
  gflags:
    description: extra "--key=value" properties to pass to the conf file
    example: |
      gflags:
        default_memory_limit_to_ram_ratio: 0.85
        max_log_size: 256
        minloglevel: 0
        placement_cloud: aws
        placement_region: us-west-2
        stderrthreshold: 2
        stop_logging_if_full_disk: true
  database.roles:
    description: https://docs.yugabyte.com/latest/api/ycql/ddl_alter_role/
    example: |
      database.roles:
        name: hank
        password: propane_bwaaa
