---
processes:
  - name: yb-tserver
    executable: /var/vcap/packages/yugabyte/bin/yb-tserver
    persistent_disk: true
    args:
      - --flagfile=/var/vcap/jobs/yb-tserver/config/tserver.conf
    limits:
      open_files: <%= p("bpm.limits.open_files") %>
      processes: <%= p("bpm.limits.processes") %>
    env:
      YB_PG_FALLBACK_SYSTEM_USER_NAME: vcap # https://github.com/yugabyte/yugabyte-db/blob/2ae238be785b1b361fd3ac6ef38008dfe17d2d82/src/postgres/src/common/username.c#L72
    unsafe:
      privileged: false
