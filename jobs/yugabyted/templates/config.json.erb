<%=

# https://github.com/yugabyte/yugabyte-db/blob/master/bin/yugabyted
# will test this out tomorrow, going to try setting this as priviledged
# first and then go from there.
#
# if that works, awesome
# still, it might be an okay option to have this be just a regular
# bpm.yml and then have it pull a config file from here

DEFAULT_MASTER_RPC_PORT = 7100
DEFAULT_TSERVER_RPC_PORT = 9100
DEFAULT_MASTER_WEBSERVER_PORT = 7000
DEFAULT_TSERVER_WEBSERVER_PORT = 9000
DEFAULT_YSQL_PORT = 5433
DEFAULT_YCQL_PORT = 9042
DEFAULT_WEBSERVER_PORT = 7200
DEFAULT_CALLHOME = True

params = {
  'data_dir' => /var/vcap/store/yugabyted,
  'log_dir' => /var/vcap/sys/log/yugabyted,
  'master_rpc_port' => DEFAULT_MASTER_RPC_PORT,
  'tserver_rpc_port' => DEFAULT_TSERVER_RPC_PORT,
  'master_webserver_port' => DEFAULT_MASTER_WEBSERVER_PORT,
  'tserver_webserver_port' => DEFAULT_TSERVER_WEBSERVER_PORT,
  'ysql_port' => DEFAULT_YSQL_PORT,
  'ycql_port' => DEFAULT_YCQL_PORT,
  'bind_ip' => DEFAULT_BIND_IP,
  'webserver_port' => DEFAULT_WEBSERVER_PORT,
  'universe_uuid' => str(uuid.uuid4()),
  'node_uuid' => str(uuid.uuid4()),
  'polling_interval' => '5',
  'callhome' => DEFAULT_CALLHOME,
  'master_flags' => '',
  'tserver_flags' => ''
}

JSON.dump(params)

%>

# {
#   "tserver_webserver_port": 9000,
#   "master_rpc_port": 7100,
#   "data_dir": "/var/vcap/store/yugabyted/yugabyte-data",
#   "callhome": true,
#   "universe_uuid": "26b79f9c-5971-4a7c-9ed1-fb7ffd4c4195",
#   "webserver_port": 7200,
#   "ysql_port": 5433,
#   "tserver_flags": "",
#   "master_webserver_port": 7000,
#   "node_uuid": "dfa8719b-f6a9-453b-9886-4e910b9ae74c",
#   "bind_ip": "0.0.0.0",
#   "log_dir": "/var/vcap/sys/log/yugabyted/yugabyte-logs",
#   "polling_interval": "5",
#   "ycql_port": 9042,
#   "master_flags": "",
#   "tserver_rpc_port": 9100
# }
